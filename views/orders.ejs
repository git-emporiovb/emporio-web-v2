<!DOCTYPE html>
<html lang="pt">
    <head>
        <!-- Title -->
        <title>Emporio Villa Borghese - Pedidos</title>
        <%- include ("./components/head") %>
        <meta name="robots" content="index, follow" />
        <style type="text/css">
            .card-img {
                position: relative;
                padding-top: 100%;
                left: 0;
                top: 0;
            }
            .card-img img {
                margin-left: 0 !important;
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                object-fit: contain;
            }
            @media only screen and (min-width: 1200px) {
                .col-lg-24 {
                    flex: 0 0 20%;
                    max-width: 20%;
                }
            }
        </style>
    </head>
    <body id="homeSection">
        <!-- ========== HEADER ========== -->
        <%- include ("./components/navbar") %>
        <!-- ========== END HEADER ========== -->

        <!-- ========== MAIN CONTENT ========== -->
        <main id="content" role="main">
            <!-- BREADCRUMB -->
            <nav class="py-5 hide-mobile">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <!-- Breadcrumb -->
                            <ol class="breadcrumb mb-0 font-size-xs text-gray-400">
                                <li class="breadcrumb-item">
                                    <a class="text-gray-400" href="/">Início</a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <a class="text-gray-400" href="/orders">Pedidos</a>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- CONTENT -->
            <section class="pt-7 pb-12">
                <div class="container">
                    <div class="row hide-mobile">
                        <div class="col-12 text-center">
                            <!-- Heading -->
                            <h3 class="mb-10">Meus pedidos</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-3 d-none d-md-block">
                            <!-- Nav -->
                            <nav class="mb-10 mb-md-0">
                                <div class="list-group list-group-sm list-group-strong list-group-flush-x">
                                    <a class="list-group-item list-group-item-action dropright-toggle active" href="/orders"> Pedidos </a>
                                    <a class="list-group-item list-group-item-action dropright-toggle" href="/profile"> Perfil </a>
                                    <a class="list-group-item list-group-item-action dropright-toggle" href="/addresses"> Endereços </a>
                                    <a class="list-group-item list-group-item-action dropright-toggle" href="/cards"> Cartões </a>
                                    <a class="list-group-item list-group-item-action dropright-toggle" href="/logout"> Sair </a>
                                </div>
                            </nav>
                        </div>
                        <div class="col-12 col-md-9 col-lg-8 offset-lg-1">
                            <% for(var i=0; i < sales.length; i++) { %>
                            <div class="card card-lg mb-5 border">
                                <div class="card-body">
                                    <div class="card card-sm">
                                        <div class="card-body bg-light">
                                            <div class="row">
                                                <div class="col-6 col-lg-2">
                                                    <h6 class="heading-xxxs text-muted">Pedido:</h6>
                                                    <p class="mb-lg-0 font-size-sm font-weight-bold">#<%= sales[i].number %></p>
                                                </div>
                                                <div class="col-6 col-lg-3">
                                                    <h6 class="heading-xxxs text-muted">Data:</h6>
                                                    <p class="mb-lg-0 font-size-sm font-weight-bold"><time datetime="<%= sales[i].date %>"> <%= Utils.formatDate(sales[i].date) %> </time></p>
                                                </div>
                                                <div class="col-6 col-lg-2">
                                                    <h6 class="heading-xxxs text-muted">Estado:</h6>
                                                    <p class="mb-0 font-size-sm font-weight-bold"><%= sales[i].status %></p>
                                                </div>
                                                <div class="col-6 col-lg-3">
                                                    <h6 class="heading-xxxs text-muted">Total:</h6>
                                                    <p class="mb-0 font-size-sm font-weight-bold">R$ <%= Utils.formatCurrency(sales[i].total) %></p>
                                                </div>
                                                <div class="col-12 col-lg-2 mt-5">
                                                    <div class="form-row">
                                                        <a class="btn btn-sm btn-block btn-outline-dark" href="/orders/<%= sales[i].id %>"> Ver </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                            <!-- Pagination -->
                            <div class="d-flex justify-content-center align-items-center pt-5">
                                <nav class="d-flex justify-content-center justify-content-md-end pb-0 pb-sm-0">
                                    <ul class="pagination pagination-sm text-gray-400">
                                        <% if (pagination.page - 1 > 0) { %>
                                        <li class="page-item">
                                            <a class="page-link page-link-arrow" onclick="goToPage(<%= pagination.page - 1 %>)"><i class="fa fa-caret-left"></i></a>
                                        </li>
                                        <% } %> <% if (pagination.page - 2 > 0) { %>
                                        <li class="page-item">
                                            <a class="page-link" onclick="goToPage(<%= pagination.page - 2 %>)"><%= pagination.page - 2 %></a>
                                        </li>
                                        <% } %> <% if (pagination.page - 1 > 0) { %>
                                        <li class="page-item">
                                            <a class="page-link" onclick="goToPage(<%= pagination.page - 1 %>)"><%= pagination.page - 1 %></a>
                                        </li>
                                        <% } %>
                                        <li class="page-item active">
                                            <a class="page-link" onclick="goToPage(<%= pagination.page %>)"> <%= pagination.page %> </a>
                                        </li>
                                        <% if (pagination.page + 1 <= pagination.pages) { %>
                                        <li class="page-item">
                                            <a class="page-link" onclick="goToPage(<%= pagination.page + 1 %>)"><%= pagination.page + 1 %></a>
                                        </li>
                                        <% } %> <% if (pagination.page + 2 <= pagination.pages) { %>
                                        <li class="page-item">
                                            <a class="page-link" onclick="goToPage(<%= pagination.page + 2 %>)"><%= pagination.page + 2 %></a>
                                        </li>
                                        <% } %> <% if (pagination.page + 1 <= pagination.pages) { %>
                                        <li class="page-item">
                                            <a class="page-link page-link-arrow" onclick="goToPage(<%= pagination.page + 1 %>)"><i class="fa fa-caret-right"></i></a>
                                        </li>
                                        <% } %>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <!-- ========== END MAIN CONTENT ========== -->
        <div class="toolbar">
            <button onclick="window.location.href = '/';"><i class="far fa-store"></i><span>Inicio</span></button>
            <button onclick="window.location.href = '/categories';"><i class="far fa-bars"></i><span>Categorias</span></button>
            <button onclick="viewCart();"><i class="far fa-shopping-cart"></i><span>Carrinho</span></button>
            <button class="active" onclick="viewAccount();"><i class="far fa-user"></i><span>Conta</span></button>
        </div>
        <!-- ========== FOOTER ========== -->
        <%- include ("./components/footer") %>
        <!-- ========== END FOOTER ========== -->

        <!-- Go to Top -->
        <a
            class="js-go-to go-to position-fixed"
            href="javascript:;"
            style="visibility: hidden"
            data-hs-go-to-options='{
       "offsetTop": 700,
       "position": {
         "init": {
           "right": 15
         },
         "show": {
           "bottom": 15
         },
         "hide": {
           "bottom": -15
         }
       }
     }'
        >
            <i class="fas fa-angle-up"></i>
        </a>
        <!-- End Go to Top -->
        <%- include ("./components/scripts") %>
        <script type="text/javascript">
            function goToPage(page) {
                var query = "orders?";
                query += "&page=" + page;
                window.location.href = query;
            }
        </script>
    </body>
</html>
